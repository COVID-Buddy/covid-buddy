<mat-card style="margin-bottom: 5px; border: 1px solid">
  <mat-card-header>
    <mat-card-title>Table</mat-card-title>
    <div>
      <button color="warn" (click)="delete.emit()" mat-button>Delete</button>
      <button color="primary" (click)="clone.emit()" mat-button>Clone</button>
      <button color="primary" (click)="shiftDown.emit()" [disabled]="last" mat-button>&darr;</button>
      <button color="primary" (click)="shiftUp.emit()" [disabled]="first" mat-button>&uarr;</button>
    </div>
  </mat-card-header>
  <mat-card-content>
    <form>
      <div>
        <mat-form-field>
          <input matInput placeholder="label" name="label" type="text" [(ngModel)]="field.label">
        </mat-form-field>
        <mat-form-field>
          <input matInput placeholder="name (used as prefix for table values)" name="name" type="text" [(ngModel)]="field.name" required>
        </mat-form-field>
        <mat-form-field>
          <input matInput placeholder="rows" name="rows" type="number" [(ngModel)]="field.rows" required>
        </mat-form-field>
      </div>
    </form>
    <form *ngFor="let val of field.columns; let i = index; trackBy: trackByFn">
      <div>
        <mat-form-field>
          <input matInput placeholder="Title" type="text" [(ngModel)]="field.columns[i].title" [name]="'label_' + i">
        </mat-form-field>
        <mat-form-field>
          <input matInput placeholder="Placeholder" type="text" [(ngModel)]="field.columns[i].placeholder" [name]="'placeholder_' + i">
        </mat-form-field>
        <button color="warn" (click)="deleteVal(i)" mat-button>Delete Column</button>
      </div>
    </form>
  </mat-card-content>

  <mat-card-actions>
    <button color="primary" (click)="addVal()" mat-button>Add Column</button>
    <button color="primary" (click)="field.rows = field.rows + 1" mat-button>Add Row</button>
  </mat-card-actions>

  <mat-card-content>
    <h4>Preview</h4>
    <table>
      <thead>
      <tr>
        <th *ngFor="let col of field.columns" style="text-align: left; border: 1px solid #ddd; padding: 4px;">{{ col.title }}</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let el of [].constructor(field.rows); let i = index;">
        <td *ngFor="let col of field.columns; let colI = index;" style="border: 1px solid #ddd; padding: 4px;">
          <input matInput [placeholder]="col.placeholder" [name]="'row_' + i + '_' + colI">
        </td>
      </tr>
      </tbody>
    </table>
  </mat-card-content>
  <mat-card-footer *ngIf="!last">
    <button color="primary" (click)="showButtons()" mat-button>{{showAddButtons ? 'Hide' : 'Insert Below'}}</button>
    <app-add-field-buttons *ngIf="showAddButtons" (addField)="onClickField($event)"></app-add-field-buttons>
  </mat-card-footer>
</mat-card>
